# DNS and how it works

## DNS란

- 192.107.233.1 처럼 숫자 또는 영어와 혼합된 IP 주소를 사람이 읽을 수 있는 주소로 변환하여 컴퓨터가 서로 통신할 수 있도록 하는 인터넷 전화번호부
- 인터넷에 연결된 각 기기에는 고유한 IP 주소를 가지고 있으며, DNS를 통해 복잡한 IP 주소를 외울 필요가 없다.
- DNS 서버는 이름에 대한 요청을 IP 주소로 변환하여 최종 사용자가 도메인 이름을 웹 브라우저에 입력할 때 해당 사용자를 어떤 서버에 연결할 것인지를 제어한다.

## Domain 구조

![imgDomainSys02](https://user-images.githubusercontent.com/38815618/131274015-7e15af4b-1828-4d3a-b736-e86ed3dc518c.gif)

- 인터넷상에서 사용되는 도메인은 전 세계적으로 고유하게 존재하는 이름
- 정해진 규칙 및 체계에 따라야 하며, 임의로 변경되거나 생성될 수 없음
- 인터넷 상의 모든 도메인은 "."(dot) 또는 root라 불리는 도메인 아래에 역트리 구조로 계층적으로 구성되어 있음

## DNS 서비스 유형

### 신뢰할 수 있는 DNS

- 개발자가 퍼블릭 DNS 이름을 관리하는데 사용하는 업데이트 메커니즘을 제공하며, 이를 통해 DNS 쿼리에 응답하여 도메인 이름을 IP 주소로 변환
- 신뢰할 수 있는 DNS는 도메인에 대해 최종 권한이 있으며 재귀적 DNS 서버에 IP 주소 정보가 담긴 답을 제공할 책임이 있음

### 재귀적 DNS

- 보통 클라이언트는 신뢰할 수 있는 DNS 서비스에 직접 쿼리를 수행하지 않고, 해석기 또는 재귀적 DNS 서비스라고 알려진 다른 유형의 DNS 서비스에 연결하는 경우가 일반적임
- 재귀적 DNS 서비스는 호텔 컨시어지와 같은 역할
- DNS 레코드를 소유하고 있지 않지만 사용자를 대신해서 DNS 정보를 가져올 수 있는 중간자의 역할
- 일정 기간 동안 캐시된 또는 저장된 DNS 레퍼런스를 가지고 있는 경우, 소스 또는 IP 정보를 제공하여 DNS 쿼리에 답을 하거나, 해당 정보를 찾기 위해 쿼리를 하나 이상의 신뢰할 수 있는 DNS 서버에 전달

## DNS 조회

- DNS는 도메인 이름을 적절한 IP 주소로 변환하는 일에 관여한다.
- DNS 정보는 로컬 또는 DNS 인프라에서 원격으로 캐시되는 경우가 많다.
- 다음 예시는 캐시되지 않는 8단계를 보여준다.

### DNS 조회의 8단계

1. 사용자가 웹 브라우저에 'example.com'을 입력하면, 쿼리가 인터넷으로 이동하고 DNS 재귀 확인자가 이를 수신한다.
2. 이어서 확인자가 DNS 루트 이름 서버(.)를 쿼리한다.
3. 다음으로, 루트 서버가, 도메인에 대한 정보를 저장하는 최상위 도메인(TLD) DNS 서버(예: .com 또는 .net)의 주소로 확인자에 응답한다. example.com을 검색할 경우의 요청은 .com TLD를 가리킨다.
4. 이제, 확인자가 .com TLD에 요청한다.
5. 이어서, TLD 서버가 도메인 이름 서버(example.com)의 IP 주소로 응답한다.
6. 마지막으로, 재귀 확인자가 도메인의 이름 서버로 쿼리를 보낸다.
7. 이제, example.com의 IP 주소가 이름 서버에서 확인자에게 반환된다.
8. 이어서, DNS 확인자가, 처음 요청한 도메인의 IP 주소로 웹 브라우저에 응답한다.
   - DNS 조회의 8단계를 거쳐 example.com의 IP 주소가 반환되면, 이제 브라우저가 웹 페이지를 요청할 수 있다.
9. 브라우저가 IP 주소로 HTTP 요청을 보낸다.
10. 해당 IP의 서버가 브라우저에서 렌더링할 웹 페이지를 반환한다(10단계).
