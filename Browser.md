# Browsers and how they work

## 웹 브라우저와 웹 서버

![img](https://user-images.githubusercontent.com/38815618/131217586-8ce3230c-1659-4241-aea8-73ae34740d42.png)

- 웹 브라우저가 웹 서버에 웹 페이지를 요청하면 웹 서버는 웹 페이지를 응답한다.
- 브라우저는 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시한다.
  - 자원은 보통 HTML 문서지만 PDF나 이미지 또는 다른 형태일 수 있으며, 자원의 주소는 URI에 의해 정해진다.
- 브라우저는 HTML과 CSS 명세에 따라 HTML 파일을 해석해서 표시하는데 이 명세는 웹 표준화 기구인 W3C(World Wide Web Consortium)에서 정한다.
- 과거에는 브라우저들이 일부만 이 명세에 따라 구현하고 독자적인 방법으로 확장함으로써 웹 제작자가 심각한 호환성 문제를 겪었지만 최근에는 대부분의 브라우저가 표준 명세를 따른다.
- 각 브라우저의 사용자 인터페이스는 비슷한데, 다음과 같은 요소들이 일반적이다.
  - URI를 입력할 수 있는 주소 표시 줄
  - 이전 버튼과 다음 버튼
  - 북마크
  - 새로 고침 버튼과 현재 문서의 로드를 중단할 수 있는 정지 버튼
  - 홈 버튼

## 브라우저 기본 구조

![layers](https://user-images.githubusercontent.com/38815618/131222148-01be9c7e-e497-4e0f-bd5e-c24919393a87.png)

- User Interface
  - 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등
  - 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분
- Browser engine
  - 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
- Rendering engine
  - 요청한 콘텐츠를 표시
- Networking
  - HTTP 요청과 같은 네트워크 호출에 사용됨
  - 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행
- UI Backend
  - 콤보 박스와 창 같은 기본적인 장치를 그림
  - 플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용
- Javascript Interpreter
  - 자바스크립트 코드를 해석하고 실행
- Data Persistence
  - 자료를 저장하는 계층
  - 쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크에 저장할 필요가 있음
  - HTML5 명세에는 브라우저가 지원하는 '웹 데이터 베이스'가 정의되어 있음

## 렌더링 엔진

- 렌더링 엔진은 요청 받은 내용을 브라우저 화면에 표시한다.
- HTML 및 XML 문서와 이미지, 플러그인이나 브라우저 확장을 이용해 PDF 유형도 표시할 수 있다.
- 파이어폭스는 게코(Gecko), 사파리와 크롬은 웹킷(Webkit) 엔진을 사용한다.

### 동작 과정

1. HTML 파싱 후 DOM 트리 만들기
2. 렌더 트리(Render Tree) 만들기
3. 렌더 트리(Render Tree) 레이아웃 만들기
4. 렌더 트리 페인팅(Render Tree Painting)

![helloworld-59361-3](https://user-images.githubusercontent.com/38815618/131233910-87d7ba9e-fc91-4853-a347-8b68c0cb56ad.png)

- 렌더링 엔진에 따라 용어가 약간 다를 수 있지만 동작 과정은 기본적으로 동일하다.
